<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FileEditor.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.google.appinventor.client.editor</a> &gt; <span class="el_source">FileEditor.java</span></div><h1>FileEditor.java</h1><pre class="source lang-java linenums">// -*- mode: java; c-basic-offset: 2; -*-
// Copyright 2009-2011 Google, All Rights reserved
// Copyright 2011-2012 MIT, All rights reserved
// Released under the Apache License, Version 2.0
// http://www.apache.org/licenses/LICENSE-2.0

package com.google.appinventor.client.editor;

import com.google.appinventor.client.Ode;
import com.google.appinventor.shared.rpc.project.FileNode;
import com.google.appinventor.shared.rpc.project.ProjectRootNode;
import com.google.gwt.core.client.Callback;
import com.google.gwt.user.client.Command;
import com.google.gwt.user.client.ui.Composite;

/**
 * Abstract superclass for all file editors.
 *
 * @author lizlooney@google.com (Liz Looney)
 */
public abstract class FileEditor extends Composite {

  // The project editor that contains this file editor.
  protected final ProjectEditor projectEditor;

  // FileNode associated with this file editor
  protected final FileNode fileNode;

<span class="nc" id="L29">  private boolean damaged = false;</span>

  /**
   * Creates a {@code FileEditor} instance.
   *
   * @param projectEditor  the project editor that contains this file editor
   * @param fileNode  FileNode associated with this file editor
   */
<span class="nc" id="L37">  public FileEditor(ProjectEditor projectEditor, FileNode fileNode) {</span>
<span class="nc" id="L38">    this.projectEditor = projectEditor;</span>
<span class="nc" id="L39">    this.fileNode = fileNode;</span>
<span class="nc" id="L40">  }</span>

  /**
   * Returns the project editor associated with this file editor.
   *
   * @return  project editor associated with this file editor
   */
  public final ProjectEditor getProjectEditor() {
<span class="nc" id="L48">    return projectEditor;</span>
  }

  /**
   * Returns the project ID associated with this file editor.
   *
   * @return  project ID associated with this file editor
   */
  public final long getProjectId() {
<span class="nc" id="L57">    return fileNode.getProjectId();</span>
  }

  /**
   * Returns the project root node associated with this file editor.
   *
   * @return  project root node associated with this file editor
   */
  public final ProjectRootNode getProjectRootNode() {
<span class="nc" id="L66">    return fileNode.getProjectRoot();</span>
  }

  /**
   * Returns the file ID associated with this file editor.
   *
   * @return  file ID associated with this file editor
   */
  public final String getFileId() {
<span class="nc" id="L75">    return fileNode.getFileId();</span>
  }

  /**
   * Returns the file node associated with this file editor.
   *
   * @return  file node associated with this file editor
   */
  public final FileNode getFileNode() {
<span class="nc" id="L84">    return fileNode;</span>
  }

  /**
   * Loads the content of the file into the editor.
   *
   * @param afterFileLoaded  optional command to be executed after the file has
   *                         been loaded
   */
  public abstract void loadFile(Command afterFileLoaded);

  /**
   * Returns the text that should appear on the tab for this file editor.
   */
  public abstract String getTabText();

  /**
   * Called when the FileEditor is about to be shown. Calls
   * Ode.getInstance().setCurrentFileEditor(this). The subclass should do anything else necessary
   * to get its UI set up after calling super.onShow().
   */
  public void onShow() {
<span class="nc" id="L106">    Ode.getInstance().setCurrentFileEditor(this);</span>
<span class="nc" id="L107">  }</span>

  /**
   * Called when the FileEditor is about to be hidden. Calls
   * Ode.getInstance().setCurrentFileEditor(null). The subclass should do anything else necessary
   * to get its UI cleaned up after calling super.onHide().
   */
  public void onHide() {
    // When an editor is detached, if we are the &quot;current&quot; editor,
    // set the current editor to null.
    // Note: I'm not sure it is possible that we would not be the &quot;current&quot;
    // editor when this is called, but we check just to be safe.
<span class="nc bnc" id="L119" title="All 2 branches missed.">    if (Ode.getInstance().getCurrentFileEditor() == this) {</span>
<span class="nc" id="L120">      Ode.getInstance().setCurrentFileEditor(null);</span>
    }
<span class="nc" id="L122">  }</span>

  /**
   * Returns true if the current editor is shown, that is, only if the designer
   * view is visible and this editor is the current file editor.
   * @return true if the editor is shown, otherwise false.
   */
  @SuppressWarnings(&quot;unused&quot;)  // called from JSNI
  public boolean isActiveEditor() {
<span class="nc bnc" id="L131" title="All 2 branches missed.">    return Ode.getInstance().getCurrentView() == 0 &amp;&amp;</span>
<span class="nc bnc" id="L132" title="All 2 branches missed.">        Ode.getInstance().getCurrentFileEditor() == this;</span>
  }

  /**
   * Called when the FileEditor is about to be closed. Subclasses can override this
   * to remove themselves as listeners.
   */
  public void onClose() {
<span class="nc" id="L140">  }</span>

  /**
   * Called to trigger the Repl (Wireless) to start. This version does nothing
   * but the YaBlocksEditor overrides this version with one that start the
   * Repl going.
   */
  public void startRepl(boolean alreadyRunning, boolean forChromebook, boolean forEmulator, boolean forUsb) {
<span class="nc" id="L148">  }</span>

  /**
   * Gets the raw content of the file associated with the editor.
   * This method is used when the EditorManager saves modified files.
   */
  public abstract String getRawFileContent();

  /**
   * Invoked after a save operation completes successfully.
   */
  public abstract void onSave();

  public void setDamaged(boolean damaged) {
<span class="nc" id="L162">    this.damaged = damaged;</span>
<span class="nc" id="L163">  }</span>

  public boolean isDamaged() {
<span class="nc" id="L166">    return damaged;</span>
  }

  /**
   * Trigger and Update of the Companion.
   *
   */

  public void updateCompanion() {
<span class="nc" id="L175">  }</span>

  public void getBlocksImage(Callback&lt;String, String&gt; callback) {
<span class="nc" id="L178">  }</span>

  /**
   * Make the workspace managed by the file editor the active workspace.
   * This is called on a YaBlocksEditor to transition between screens when working with the
   * companion.
   */
  public void makeActiveWorkspace() {
<span class="nc" id="L186">  }</span>

  /**
   * YaBlockEditor will use Blockly.hideChaff to close tooltips, context menus etc.
   */
  public void hideChaff() {
<span class="nc" id="L192">  }</span>

  /**
   * Resize the editor in response to an external event.
   */
  public void resize() {
<span class="nc" id="L198">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>