<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Tracking.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.google.appinventor.client.tracking</a> &gt; <span class="el_source">Tracking.java</span></div><h1>Tracking.java</h1><pre class="source lang-java linenums">// -*- mode: java; c-basic-offset: 2; -*-
// Copyright 2009-2011 Google, All Rights reserved
// Copyright 2011-2022 MIT, All rights reserved
// Released under the Apache License, Version 2.0
// http://www.apache.org/licenses/LICENSE-2.0

package com.google.appinventor.client.tracking;

import com.google.appinventor.common.version.AppInventorFeatures;

/**
 * Methods for tracking/logging with Google Analytics.
 *
 */
public class Tracking {

  /**
   * Pre-defined events and actions.
   */
  public static final String PROJECT_EVENT = &quot;Project&quot;;
  public static final String PROJECT_ACTION_PREFIX = &quot;Project_&quot;;
  public static final String PROJECT_ACTION_NEW_YA = PROJECT_ACTION_PREFIX +
      &quot;New-YA&quot;;
  public static final String PROJECT_ACTION_DELETE_PROJECT_YA = PROJECT_ACTION_PREFIX +
      &quot;DeleteProject-YA&quot;;
  public static final String PROJECT_ACTION_RESTORE_PROJECT_YA = PROJECT_ACTION_PREFIX +
      &quot;RestoreProject-YA&quot;;
  public static final String PROJECT_ACTION_MOVE_TO_TRASH_PROJECT_YA = PROJECT_ACTION_PREFIX +
      &quot;MoveToTrashProject-YA&quot;;
  public static final String PROJECT_ACTION_DELETE_FILE_YA = PROJECT_ACTION_PREFIX +
      &quot;DeleteFile-YA&quot;;
  public static final String PROJECT_ACTION_PREVIEW_FILE_YA = PROJECT_ACTION_PREFIX +
      &quot;PreviewFile-YA&quot;;
  public static final String PROJECT_ACTION_BUILD_BARCODE_YA = PROJECT_ACTION_PREFIX +
      &quot;BuildBarcode-YA&quot;;
  public static final String PROJECT_ACTION_BUILD_DOWNLOAD_YA = PROJECT_ACTION_PREFIX +
      &quot;BuildDownload-YA&quot;;
  public static final String PROJECT_ACTION_BUILD_YAIL_YA = PROJECT_ACTION_PREFIX +
      &quot;BuildYail-YA&quot;;
  public static final String PROJECT_ACTION_DOWNLOAD_PROJECT_SOURCE_YA = PROJECT_ACTION_PREFIX +
      &quot;DownloadProjectSource-YA&quot;;
  public static final String PROJECT_ACTION_DOWNLOAD_FILE_YA = PROJECT_ACTION_PREFIX +
      &quot;DownloadFile-YA&quot;;
  public static final String PROJECT_ACTION_DOWNLOAD_SELECTED_PROJECTS_SOURCE_YA =
      PROJECT_ACTION_PREFIX + &quot;DownloadSelectedProjectsSource-YA&quot;;
  public static final String PROJECT_ACTION_DOWNLOAD_ALL_PROJECTS_SOURCE_YA =
      PROJECT_ACTION_PREFIX + &quot;DownloadAllProjectsSource-YA&quot;;
  public static final String PROJECT_ACTION_SAVE_YA = PROJECT_ACTION_PREFIX +
      &quot;Save-YA&quot;;
  public static final String PROJECT_ACTION_SAVE_AS_YA = PROJECT_ACTION_PREFIX +
      &quot;SaveAs-YA&quot;;
  public static final String PROJECT_ACTION_CHECKPOINT_YA = PROJECT_ACTION_PREFIX +
      &quot;Checkpoint-YA&quot;;
  public static final String PROJECT_ACTION_ADDFORM_YA = PROJECT_ACTION_PREFIX +
      &quot;AddForm-YA&quot;;
  public static final String PROJECT_ACTION_REMOVEFORM_YA = PROJECT_ACTION_PREFIX +
      &quot;RemoveForm-YA&quot;;
  public static final String PROJECT_SUBACTION_BUILD_YA = PROJECT_ACTION_PREFIX +
      &quot;Build-Subcommand-YA&quot;;

  public static final String EDITOR_EVENT = &quot;Editor&quot;;
  public static final String EDITOR_ACTION_SHOW_DESIGNER = &quot;ShowDesigner&quot;;
  public static final String EDITOR_ACTION_SHOW_BLOCKS = &quot;ShowBlocks&quot;;

  public static final String CONNECT_EVENT = &quot;Connect&quot;;
  public static final String CONNECT_ACTION_WIFI = &quot;Wifi&quot;;
  public static final String CONNECT_ACTION_CHROMEBOOK = &quot;Chromebook&quot;;
  public static final String CONNECT_ACTION_EMULATOR = &quot;Emulator&quot;;
  public static final String CONNECT_ACTION_USB = &quot;Usb&quot;;
  public static final String CONNECT_ACTION_RESEND = &quot;Resend&quot;;
  public static final String CONNECT_ACTION_RESET = &quot;Reset&quot;;
  public static final String CONNECT_ACTION_HARD_RESET = &quot;HardReset&quot;;

  public static final String USER_EVENT = &quot;User&quot;;
  public static final String USER_ACTION_PREFIX = &quot;User_&quot;;
  public static final String USER_ACTION_DOWNLOAD_KEYSTORE = USER_ACTION_PREFIX + &quot;DownloadKeystore&quot;;
  public static final String USER_ACTION_UPLOAD_KEYSTORE = USER_ACTION_PREFIX + &quot;UploadKeystore&quot;;
  public static final String USER_ACTION_DELETE_KEYSTORE = USER_ACTION_PREFIX + &quot;DeleteKeystore&quot;;

  private Tracking() {
  }

  public static void trackEvent(String event) {
<span class="nc bnc" id="L84" title="All 2 branches missed.">    if (trackingAvailable()) {</span>
<span class="nc" id="L85">      gaTrackEvent(event);</span>
    }
<span class="nc" id="L87">  }</span>

  /**
   * Track an event.
   *
   * @param event  event category
   * @param action  event action
   */
  public static void trackEvent(String event, String action) {
<span class="nc bnc" id="L96" title="All 2 branches missed.">    if (trackingAvailable()) {</span>
<span class="nc" id="L97">      gaTrackEvent(event, action);</span>
    }
<span class="nc" id="L99">  }</span>

  /**
   * Track an event.
   *
   * @param event  event category
   * @param action  event action
   * @param label  event label
   */
  public static void trackEvent(String event, String action, String label) {
<span class="nc bnc" id="L109" title="All 2 branches missed.">    if (trackingAvailable()) {</span>
<span class="nc" id="L110">      gaTrackEvent(event, action, label);</span>
    }
<span class="nc" id="L112">  }</span>

  /**
   * Track an event.
   *
   * @param event  event category
   * @param action  event action
   * @param label  event label
   * @param value  event value (latency)
   */
  public static void trackEvent(String event, String action, String label, int value) {
<span class="nc bnc" id="L123" title="All 2 branches missed.">    if (trackingAvailable()) {</span>
<span class="nc" id="L124">      gaTrackEvent(event, action, label, value);</span>
    }
<span class="nc" id="L126">  }</span>

  /*
   * Indicates whether to track or not.
   */
  private static boolean trackingAvailable() {
<span class="nc" id="L132">    return AppInventorFeatures.trackClientEvents();</span>
  }

  private static native void gaTrackEvent(String event) /*-{
    if ($wnd.gtag) {
      $wnd.gtag('event', event);
    }
  }-*/;

  /*
   * Track an event.
   */
  private static native void gaTrackEvent(String event, String action) /*-{
    if ($wnd.gtag) {
      $wnd.gtag('event', event, {'action': action});
    }
  }-*/;

  /*
   * Track an event.
   */
  private static native void gaTrackEvent(String event, String action, String label) /*-{
    if ($wnd.gtag) {
      $wnd.gtag('event', event, {'action': action, 'label': label});
    }
  }-*/;

  /*
   * Track an event.
   */
  private static native void gaTrackEvent(String event, String action, String label, int value) /*-{
    if ($wnd.gtag) {
      $wnd.gtag('event', event, {'action': action, 'label': label, 'value': value});
    }
  }-*/;
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>