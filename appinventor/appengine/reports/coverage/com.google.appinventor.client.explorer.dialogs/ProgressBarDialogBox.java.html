<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ProgressBarDialogBox.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.google.appinventor.client.explorer.dialogs</a> &gt; <span class="el_source">ProgressBarDialogBox.java</span></div><h1>ProgressBarDialogBox.java</h1><pre class="source lang-java linenums">package com.google.appinventor.client.explorer.dialogs;

import com.google.appinventor.client.explorer.commands.MiniProgressBar;
import com.google.appinventor.client.explorer.commands.ShowProgressBarCommand;
import com.google.appinventor.shared.rpc.RpcResult;
import com.google.appinventor.shared.rpc.project.ProjectNode;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.DialogBox;
import com.google.gwt.user.client.ui.HTML;
import com.google.gwt.user.client.ui.HorizontalPanel;
import com.google.gwt.user.client.ui.VerticalPanel;

import static com.google.appinventor.client.Ode.MESSAGES;

/**
 * A dialog containing a progress bar. This was originally defined in
 * {@link ShowProgressBarCommand}, but has utility in other parts of App Inventor so it was moved
 * to its own class.
 */
public class ProgressBarDialogBox extends DialogBox {
  private static final String LOADING_ASSETS_ACTION = &quot;LoadingAssetsAction&quot;;
  // 0 means just initialize, 1 means click once, 2 means click twice
<span class="nc" id="L25">  private int progressBarShow = 0;</span>
<span class="nc" id="L26">  private Button dismissButton = new Button(MESSAGES.dismissButton());</span>
  private HTML warningLabel;
<span class="nc" id="L28">  private MiniProgressBar mpb = new MiniProgressBar(0, 100, 0);</span>
  private String serviceName;

  //constructor
  public ProgressBarDialogBox(String serviceName, ProjectNode projectNode) {
<span class="nc" id="L33">    super(false, true);</span>
<span class="nc" id="L34">    this.serviceName = serviceName;</span>
<span class="nc" id="L35">    setStylePrimaryName(&quot;ode-DialogBox&quot;);</span>
<span class="nc" id="L36">    setText(projectNode.getName() + &quot; &quot; + MESSAGES.ProgressBarFor());</span>

    //click handler for the mini html buttons
<span class="nc" id="L39">    ClickHandler buttonHandler = new ClickHandler() {</span>
      @Override
      public void onClick(ClickEvent event) {
<span class="nc" id="L42">        hide();</span>
<span class="nc" id="L43">        progressBarShow++;</span>
<span class="nc" id="L44">      }</span>
    };

    //declare the ok button
<span class="nc" id="L48">    dismissButton.addClickHandler(buttonHandler);</span>
<span class="nc" id="L49">    HorizontalPanel buttonPanel = new HorizontalPanel();</span>
<span class="nc" id="L50">    buttonPanel.setHorizontalAlignment(HorizontalPanel.ALIGN_CENTER);</span>
<span class="nc" id="L51">    dismissButton.setVisible(false); // we don't need the button unless we get an error</span>

    //warning label
<span class="nc" id="L54">    warningLabel = new HTML(&quot;&quot;);</span>
<span class="nc" id="L55">    warningLabel.setWordWrap(true);</span>
<span class="nc" id="L56">    warningLabel.setWidth(&quot;60em&quot;);  // set width to get the text to wrap</span>

    //warning panel
<span class="nc" id="L59">    HorizontalPanel warningPanel = new HorizontalPanel();</span>
<span class="nc" id="L60">    warningPanel.setHorizontalAlignment(HorizontalPanel.ALIGN_LEFT);</span>
<span class="nc" id="L61">    warningPanel.add(warningLabel);</span>

    // button panel
<span class="nc" id="L64">    buttonPanel.add(dismissButton);</span>
<span class="nc" id="L65">    buttonPanel.setSize(&quot;100%&quot;, &quot;24px&quot;);</span>

    //content panel
<span class="nc" id="L68">    VerticalPanel contentPanel = new VerticalPanel();</span>
<span class="nc" id="L69">    contentPanel.add(mpb);</span>
<span class="nc" id="L70">    contentPanel.add(warningPanel);</span>
<span class="nc" id="L71">    contentPanel.add(buttonPanel);</span>
<span class="nc" id="L72">    setWidget(contentPanel);</span>
<span class="nc" id="L73">  }</span>

  public void clear() {
<span class="nc" id="L76">    warningLabel.setHTML(&quot;&quot;);</span>
<span class="nc" id="L77">  }</span>

  public void setProgress(int progress, String message) {
<span class="nc" id="L80">    mpb.setProgress(progress);</span>
<span class="nc" id="L81">    warningLabel.setHTML(message);</span>
<span class="nc" id="L82">  }</span>

  public void showDismissButton() {
<span class="nc" id="L85">    dismissButton.setVisible(true);</span>
<span class="nc" id="L86">  }</span>

  public int getProgressBarShow() {
<span class="nc" id="L89">    return progressBarShow;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>