<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MockCheckBox.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.google.appinventor.client.editor.simple.components</a> &gt; <span class="el_source">MockCheckBox.java</span></div><h1>MockCheckBox.java</h1><pre class="source lang-java linenums">// -*- mode: java; c-basic-offset: 2; -*-
// Copyright 2009-2011 Google, All Rights reserved
// Copyright 2011-2020 MIT, All rights reserved
// Released under the Apache License, Version 2.0
// http://www.apache.org/licenses/LICENSE-2.0

package com.google.appinventor.client.editor.simple.components;

import com.google.appinventor.client.editor.simple.SimpleEditor;
import com.google.appinventor.client.editor.simple.components.utils.SVGPanel;
import com.google.gwt.user.client.ui.HasHorizontalAlignment;
import com.google.gwt.user.client.ui.HorizontalPanel;
import com.google.gwt.user.client.ui.InlineHTML;

/**
 * Mock CheckBox component, inherited from MockToggleBase
 *
 * @author lizlooney@google.com (Liz Looney), srlane@mit.edu (Susan Rati Lane)
 */
public final class MockCheckBox extends MockToggleBase&lt;HorizontalPanel&gt; {

  /**
   * Component type name.
   */
  public static final String TYPE = &quot;CheckBox&quot;;

  //Widgets for MockCheckBox
  protected final HorizontalPanel panel;
<span class="nc" id="L29">  public Boolean checked = false;  // the &quot;on&quot; property of the switch is equivalent to &quot;checked&quot;</span>

  public InlineHTML checkBoxLabel;
  public SVGPanel checkBoxGraphic;
  public Boolean isInitialized;

  /**
   * Creates a new MockCheckbox component.
   *
   * @param editor  editor of source file the component belongs to
   */
  public MockCheckBox(SimpleEditor editor) {
<span class="nc" id="L41">    super(editor, TYPE, images.checkbox());</span>

<span class="nc" id="L43">    panel = new HorizontalPanel();</span>
<span class="nc" id="L44">    checkBoxLabel = new InlineHTML();</span>
<span class="nc" id="L45">    toggleWidget = panel;</span>
<span class="nc" id="L46">    isInitialized = false;</span>
<span class="nc" id="L47">    initWrapper(toggleWidget);</span>
<span class="nc" id="L48">  }</span>

  /**
   * Draw the SVG graphic of the toggle switch. It can be drawn in either checked or
   * unchecked positions, each with their own colors.
   *
   */
  private void paintCheckBox(boolean checked) {
<span class="nc bnc" id="L56" title="All 2 branches missed.">    if (isInitialized) {</span>
<span class="nc" id="L57">      panel.remove(checkBoxGraphic);</span>
    } else {
<span class="nc" id="L59">      isInitialized = true;</span>
    }
<span class="nc" id="L61">    checkBoxGraphic = new SVGPanel();</span>
<span class="nc" id="L62">    int checkBoxHeight = 20;</span>

<span class="nc" id="L64">    int checkBoxWidth = 20;</span>

<span class="nc bnc" id="L66" title="All 2 branches missed.">    if (checked) {</span>
<span class="nc bnc" id="L67" title="All 2 branches missed.">      if (phonePreview.equals(&quot;Classic&quot;)) {</span>
<span class="nc" id="L68">        classicCheckBox();</span>
<span class="nc bnc" id="L69" title="All 2 branches missed.">      } else if (phonePreview.equals(&quot;Android Material&quot;)) {</span>
<span class="nc" id="L70">        materialCheckBox();</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">      } else if (phonePreview.equals(&quot;Android Holo&quot;)) {</span>
<span class="nc" id="L72">        holoCheckBox();</span>
      } else {
<span class="nc" id="L74">        iosCheckBox();</span>
      }
    } else {
<span class="nc" id="L77">      unchecked();</span>
    }
<span class="nc" id="L79">    checkBoxGraphic.setWidth(checkBoxWidth + &quot;px&quot;);</span>
<span class="nc" id="L80">    checkBoxGraphic.setHeight(checkBoxHeight + &quot;px&quot;);</span>

<span class="nc" id="L82">    panel.add(checkBoxGraphic);</span>
<span class="nc" id="L83">    panel.setCellWidth(checkBoxGraphic, checkBoxWidth + &quot;px&quot;);</span>
<span class="nc" id="L84">    panel.setCellHorizontalAlignment(checkBoxGraphic, HasHorizontalAlignment.ALIGN_LEFT);</span>
<span class="nc" id="L85">    panel.add(checkBoxLabel);</span>
<span class="nc" id="L86">    toggleWidget = panel;</span>
<span class="nc" id="L87">    refreshForm();</span>
<span class="nc" id="L88">  }</span>

  private void classicCheckBox() {
<span class="nc" id="L91">    checkBoxGraphic.setInnerSVG(&quot;&lt;g transform=\&quot;translate(35.5 27.5)\&quot;&gt;\n&quot;</span>
        + &quot;&lt;path d=\&quot;M6.838,12.553l-1.366-1.53L4.355,12.094l2.407,2.665L12.8,8.5l-1-1.012Z\&quot;&quot;
        + &quot; transform=\&quot;translate(-35.466 -29.759)\&quot; fill=\&quot;#179213\&quot; opacity=\&quot;0.54\&quot;/&gt;\n&quot;
        + &quot;&lt;rect width=\&quot;16\&quot; height=\&quot;16\&quot; rx=\&quot;2\&quot; transform=\&quot;translate(-35 -27)\&quot;&quot;
        + &quot; fill=\&quot;none\&quot; stroke=\&quot;#707070\&quot; stroke-linejoin=\&quot;round\&quot; stroke-width=\&quot;1\&quot;/&gt;\n&quot;
        + &quot;&lt;/g&gt;&quot;);
<span class="nc" id="L97">  }</span>

  private void materialCheckBox() {
<span class="nc" id="L100">    String checkBoxColor = MockComponentsUtil.getColor(colorAccent).toString();</span>
<span class="nc" id="L101">    checkBoxGraphic.setInnerSVG(&quot;&lt;path d=\&quot;M17.222,3H4.778A1.783,1.783,0,0,0,3,4.778V17.222A1.783,1.783,0,0,0,4.778,19H17.222A1.783,1.783,0,0,0,19,17.222V4.778A1.783,1.783,0,0,0,17.222,3Zm-8,12.444L4.778,11.178l1.244-1.156,3.2,3.111,6.756-6.578,1.244,1.156-8,7.733Z\&quot; transform=\&quot;translate(-3 -3)\&quot; fill=\&quot;&quot; + checkBoxColor + &quot;\&quot;/&gt;&quot;);</span>
<span class="nc" id="L102">  }</span>

  private void holoCheckBox() {
<span class="nc" id="L105">    checkBoxGraphic.setInnerSVG(&quot;&lt;path d=\&quot;M17.222,3H4.778A1.783,1.783,0,0,0,3,4.778V17.222A1.783,1.783,0,0,0,4.778,19H17.222A1.783,1.783,0,0,0,19,17.222V4.778A1.783,1.783,0,0,0,17.222,3Zm-8,12.444L4.778,11.178l1.244-1.156,3.2,3.111,6.756-6.578,1.244,1.156-8,7.733Z\&quot; transform=\&quot;translate(-3 -3)\&quot;/&gt;&quot;);</span>
<span class="nc" id="L106">  }</span>

  private void iosCheckBox() {
<span class="nc" id="L109">    checkBoxGraphic.setInnerSVG(&quot;&lt;g transform=\&quot;translate(-574 -295)\&quot;&gt;\n&quot;</span>
        + &quot;&lt;rect width=\&quot;16\&quot; height=\&quot;16\&quot; rx=\&quot;2\&quot; transform=\&quot;translate(574 295)\&quot;&quot;
        + &quot; fill=\&quot;#4c9c94\&quot;/&gt;\n&quot;
        + &quot;&lt;path d=\&quot;M1.5,4.5,0,6l4,4,9-8.5L11.5,0,4,7Z\&quot; transform=\&quot;translate(575.5 298.5)\&quot;&quot;
        + &quot; fill=\&quot;#fff\&quot;/&gt;\n&quot;
        + &quot;&lt;/g&gt;&quot;);
<span class="nc" id="L115">  }</span>

  private void unchecked() {
<span class="nc" id="L118">    checkBoxGraphic.setInnerSVG(&quot;&lt;g fill=\&quot;#fff\&quot; stroke=\&quot;#707070\&quot; stroke-width=\&quot;1\&quot;&gt;\n&quot;</span>
        + &quot;&lt;rect width=\&quot;16\&quot; height=\&quot;16\&quot; rx=\&quot;2\&quot; stroke=\&quot;none\&quot;/&gt;\n&quot;
        + &quot;&lt;rect x=\&quot;0.5\&quot; y=\&quot;0.5\&quot; width=\&quot;15\&quot; height=\&quot;15\&quot; rx=\&quot;1.5\&quot; fill=\&quot;none\&quot;/&gt;\n&quot;
        + &quot;&lt;/g&gt;&quot;);
<span class="nc" id="L122">  }</span>

  /*
   * Sets the checkbox's Text property to a new value.
   */
  protected void setTextProperty(String text) {
<span class="nc" id="L128">    panel.remove(checkBoxLabel);</span>
<span class="nc" id="L129">    checkBoxLabel.setText(text);</span>
<span class="nc" id="L130">    panel.insert(checkBoxLabel, 1);</span>
<span class="nc" id="L131">    toggleWidget = panel;</span>
<span class="nc" id="L132">    updatePreferredSize();</span>
<span class="nc" id="L133">  }</span>

  /*
   * Sets the checkbox's Checked property to a new value.
   */
  private void setCheckedProperty(String text) {
<span class="nc" id="L139">    checked = Boolean.parseBoolean(text);</span>
<span class="nc" id="L140">    paintCheckBox(checked);</span>
<span class="nc" id="L141">  }</span>

  @Override
  public void onPropertyChange(String propertyName, String newValue) {
<span class="nc" id="L145">    super.onPropertyChange(propertyName, newValue);</span>

    // Apply changed properties to the mock component
<span class="nc bnc" id="L148" title="All 2 branches missed.">    if (propertyName.equals(PROPERTY_NAME_CHECKED)) {</span>
<span class="nc" id="L149">      setCheckedProperty(newValue);</span>
<span class="nc" id="L150">      refreshForm();</span>
    }
<span class="nc" id="L152">  }</span>

  /*
   * We add the DesignPreviewChangeListener here instead of in the
   * constructor because at construction time we do not have a
   * container so getForm() fails.
   */

  @Override
  protected void setContainer(MockContainer container) {
<span class="nc" id="L162">    super.setContainer(container);</span>
<span class="nc" id="L163">    getForm().addDesignPreviewChangeListener(this);</span>
<span class="nc" id="L164">  }</span>

  @Override
  public void onDesignPreviewChanged() {
<span class="nc" id="L168">    super.onDesignPreviewChanged();</span>
<span class="nc" id="L169">    paintCheckBox(checked);</span>
<span class="nc" id="L170">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>