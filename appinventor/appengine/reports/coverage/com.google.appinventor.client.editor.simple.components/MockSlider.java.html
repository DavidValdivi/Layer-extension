<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MockSlider.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.google.appinventor.client.editor.simple.components</a> &gt; <span class="el_source">MockSlider.java</span></div><h1>MockSlider.java</h1><pre class="source lang-java linenums">// -*- mode: java; c-basic-offset: 2; -*-
// Copyright 2009-2011 Google, All Rights reserved
// Copyright 2011-2012 MIT, All rights reserved
// Released under the Apache License, Version 2.0
// http://www.apache.org/licenses/LICENSE-2.0

package com.google.appinventor.client.editor.simple.components;

import com.google.appinventor.client.editor.simple.SimpleEditor;
import com.google.appinventor.client.editor.simple.components.utils.SVGPanel;
import com.google.gwt.user.client.ui.HasHorizontalAlignment;
import com.google.gwt.user.client.ui.HasVerticalAlignment;
import com.google.gwt.user.client.ui.HorizontalPanel;

/**
 * Mock Slider component.
 *
 * @author M. Hossein Amerkashi - kkashi01@gmail.com
 */
public final class MockSlider extends MockVisibleComponent {

  /**
   * Component type name.
   */
  public static final String TYPE = &quot;Slider&quot;;

  protected static final String PROPERTY_NAME_COLORLEFT = &quot;ColorLeft&quot;;
  protected static final String PROPERTY_NAME_COLORRIGHT = &quot;ColorRight&quot;;

  // Widget for showing the mock slider
  protected final HorizontalPanel panel;
<span class="nc" id="L32">  private boolean initialized = false;</span>
<span class="nc" id="L33">  public String trackColorActive = &quot;orange&quot;;</span>
<span class="nc" id="L34">  public String trackColorInactive = &quot;gray&quot;;</span>

  public SVGPanel sliderGraphic;

  /**
   * Creates a new MockSlider component.
   *
   * @param editor editor of source file the component belongs to
   */
  public MockSlider(SimpleEditor editor) {
<span class="nc" id="L44">    super(editor, TYPE, images.slider());</span>

    // Initialize mock slider UI
<span class="nc" id="L47">    panel = new HorizontalPanel();</span>
<span class="nc" id="L48">    panel.setStylePrimaryName(&quot;ode-SimpleMockComponent&quot;);</span>
<span class="nc" id="L49">    initComponent(panel);</span>
<span class="nc" id="L50">    paintSlider();</span>
<span class="nc" id="L51">  }</span>

  /**
   * Draw the SVG graphic of the slider. It displays the left and
   * right sides of the slider, each with their own colors.
   *
   */
  private void paintSlider() {
<span class="nc bnc" id="L59" title="All 2 branches missed.">    if (initialized) {</span>
<span class="nc" id="L60">      panel.remove(sliderGraphic);</span>
    } else {
<span class="nc" id="L62">      initialized = true;</span>
    }

<span class="nc" id="L65">    sliderGraphic = new SVGPanel();</span>
    int sliderHeight;
    int sliderWidth;

<span class="nc bnc" id="L69" title="All 2 branches missed.">    if (phonePreview.equals(&quot;Classic&quot;)) {</span>
<span class="nc" id="L70">      sliderHeight = 20;</span>
<span class="nc" id="L71">      sliderWidth = 120;</span>
<span class="nc" id="L72">      classicSlider();</span>
<span class="nc bnc" id="L73" title="All 2 branches missed.">    } else if (phonePreview.equals(&quot;Android Material&quot;)) {</span>
<span class="nc" id="L74">      sliderHeight = 15;</span>
<span class="nc" id="L75">      sliderWidth = 80;</span>
<span class="nc" id="L76">      materialSlider();</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">    } else if (phonePreview.equals(&quot;Android Holo&quot;)) {</span>
<span class="nc" id="L78">      sliderHeight = 28;</span>
<span class="nc" id="L79">      sliderWidth = 80;</span>
<span class="nc" id="L80">      holoSlider();</span>
    } else {
<span class="nc" id="L82">      sliderHeight = 30;</span>
<span class="nc" id="L83">      sliderWidth = 80;</span>
<span class="nc" id="L84">      iosSlider();</span>
    }

<span class="nc" id="L87">    sliderGraphic.setWidth(sliderWidth + &quot;px&quot;);</span>
<span class="nc" id="L88">    sliderGraphic.setHeight(sliderHeight + &quot;px&quot;);</span>

<span class="nc" id="L90">    panel.add(sliderGraphic);</span>
<span class="nc" id="L91">    panel.setCellWidth(sliderGraphic, sliderWidth + &quot;px&quot;);</span>
<span class="nc" id="L92">    panel.setCellHorizontalAlignment(sliderGraphic, HasHorizontalAlignment.ALIGN_LEFT);</span>
<span class="nc" id="L93">    panel.setCellVerticalAlignment(sliderGraphic, HasVerticalAlignment.ALIGN_MIDDLE);</span>
<span class="nc" id="L94">    refreshForm();</span>
<span class="nc" id="L95">  }</span>

  private void classicSlider() {
<span class="nc" id="L98">    sliderGraphic.setInnerSVG(&quot;&lt;g id=\&quot;Group_1\&quot; data-name=\&quot;Group 1\&quot;&quot;</span>
        + &quot; transform=\&quot;translate(-127 -186)\&quot; style=\&quot;isolation: isolate\&quot;&gt;\n&quot;
        + &quot;&lt;path d=\&quot;M4,0H60a0,0,0,0,1,0,0V14a0,0,0,0,1,0,0H4a4,4,0,0,1-4-4V4A4,4,0,0,1,4,0Z\&quot;&quot;
        + &quot; transform=\&quot;translate(127 189)\&quot; fill=\&quot;&quot; + trackColorActive + &quot;\&quot;/&gt;\n&quot;
        + &quot;&lt;path d=\&quot;M0,0H56a4,4,0,0,1,4,4v6a4,4,0,0,1-4,4H0a0,0,0,0,1,0,0V0A0,0,0,0,1,0,0Z\&quot;&quot;
        + &quot; transform=\&quot;translate(187 189)\&quot; fill=\&quot;&quot; + trackColorInactive + &quot;\&quot;/&gt;\n&quot;
        + &quot;&lt;rect width=\&quot;14\&quot; height=\&quot;20\&quot; rx=\&quot;2\&quot; transform=\&quot;translate(180 186)\&quot;&quot;
        + &quot; fill=\&quot;#aaa9ad\&quot;/&gt;\n&quot;
        + &quot;&lt;/g&gt;&quot;);
<span class="nc" id="L107">  }</span>

  private void holoSlider() {
<span class="nc" id="L110">    sliderGraphic.setInnerSVG(&quot; &lt;defs&gt;\n&quot;</span>
        + &quot;&lt;filter id=\&quot;Ellipse_1\&quot; x=\&quot;21\&quot; y=\&quot;0\&quot; width=\&quot;38\&quot; height=\&quot;38\&quot;&quot;
        + &quot; filterUnits=\&quot;userSpaceOnUse\&quot;&gt;\n&quot;
        + &quot;&lt;feOffset dy=\&quot;3\&quot; input=\&quot;SourceAlpha\&quot;/&gt;\n&quot;
        + &quot;&lt;feGaussianBlur stdDeviation=\&quot;3\&quot; result=\&quot;blur\&quot;/&gt;\n&quot;
        + &quot;&lt;feFlood flood-color=\&quot;#33b5e5\&quot; flood-opacity=\&quot;0.161\&quot;/&gt;\n&quot;
        + &quot;&lt;feComposite operator=\&quot;in\&quot; in2=\&quot;blur\&quot;/&gt;\n&quot;
        + &quot;&lt;feComposite in=\&quot;SourceGraphic\&quot;/&gt;\n&quot;
        + &quot;&lt;/filter&gt;\n&quot;
        + &quot;&lt;/defs&gt;\n&quot;
        + &quot;&lt;g id=\&quot;Group_1\&quot; data-name=\&quot;Group 1\&quot; transform=\&quot;translate(-58 -18)\&quot;&gt;\n&quot;
        + &quot;&lt;rect width=\&quot;40\&quot; height=\&quot;4\&quot; transform=\&quot;translate(58 32)\&quot;&quot;
        + &quot; fill=\&quot;&quot; + trackColorActive + &quot;\&quot;/&gt;\n&quot;
        + &quot;&lt;rect width=\&quot;40\&quot; height=\&quot;4\&quot; transform=\&quot;translate(98 31.923)\&quot;&quot;
        + &quot; fill=\&quot;&quot; + trackColorInactive + &quot;\&quot;/&gt;\n&quot;
        + &quot;&lt;g transform=\&quot;matrix(1, 0, 0, 1, 58, 18)\&quot; filter=\&quot;url(#Ellipse_1)\&quot;&gt;\n&quot;
        + &quot;&lt;circle cx=\&quot;10\&quot; cy=\&quot;10\&quot; r=\&quot;10\&quot; transform=\&quot;translate(30 6)\&quot; fill=\&quot;#2abbf1\&quot;&quot;
        + &quot; opacity=\&quot;0.64\&quot;/&gt;\n&quot;
        + &quot;&lt;/g&gt;\n&quot;
        + &quot;&lt;circle cx=\&quot;4\&quot; cy=\&quot;4\&quot; r=\&quot;4\&quot; transform=\&quot;translate(94 30)\&quot; fill=\&quot;#33b5e5\&quot;/&gt;\n&quot;
        + &quot;&lt;/g&gt;&quot;);
<span class="nc" id="L131">  }</span>

  private void materialSlider() {
<span class="nc" id="L134">    String thumbColor = MockComponentsUtil.getColor(colorAccent).toString();</span>
<span class="nc" id="L135">    sliderGraphic.setInnerSVG(&quot;&lt;g transform=\&quot;translate(-217 -337)\&quot;&gt;\n&quot;</span>
        + &quot;&lt;path d=\&quot;M2,0H40a0,0,0,0,1,0,0V4a0,0,0,0,1,0,0H2A2,2,0,0,1,0,2V2A2,2,0,0,1,2,0Z\&quot;&quot;
        + &quot; transform=\&quot;translate(217 342)\&quot; fill=\&quot;&quot; + trackColorActive + &quot;\&quot;/&gt;\n&quot;
        + &quot;&lt;path d=\&quot;M0,0H38.25A1.75,1.75,0,0,1,40,1.75v0A1.75,1.75,0,0,1,38.25,3.5H0a0,0,0,0,1,0,0V0A0,0,0,0,1,0,0Z\&quot;&quot;
        + &quot; transform=\&quot;translate(257 342)\&quot; fill=\&quot;&quot; + trackColorInactive + &quot;\&quot;/&gt;\n&quot;
        + &quot;&lt;circle cx=\&quot;7\&quot; cy=\&quot;7\&quot; r=\&quot;7\&quot; transform=\&quot;translate(253 337)\&quot; fill=\&quot;&quot;
        + thumbColor + &quot;\&quot;/&gt;\n&quot;
        + &quot;&lt;/g&gt;&quot;);
<span class="nc" id="L143">  }</span>

  private void iosSlider() {
<span class="nc" id="L146">    sliderGraphic.setInnerSVG(&quot;&lt;defs&gt;\n&quot;</span>
        + &quot;&lt;filter id=\&quot;Knob\&quot; x=\&quot;22.575\&quot; y=\&quot;0\&quot; width=\&quot;35\&quot; height=\&quot;35\&quot;&quot;
        + &quot; filterUnits=\&quot;userSpaceOnUse\&quot;&gt;\n&quot;
        + &quot;&lt;feOffset dy=\&quot;3\&quot; input=\&quot;SourceAlpha\&quot;/&gt;\n&quot;
        + &quot;&lt;feGaussianBlur stdDeviation=\&quot;1\&quot; result=\&quot;blur\&quot;/&gt;\n&quot;
        + &quot;&lt;feFlood flood-opacity=\&quot;0.078\&quot;/&gt;\n&quot;
        + &quot;&lt;feComposite operator=\&quot;in\&quot; in2=\&quot;blur\&quot;/&gt;\n&quot;
        + &quot;&lt;feComposite in=\&quot;SourceGraphic\&quot;/&gt;\n&quot;
        + &quot;&lt;/filter&gt;\n&quot;
        + &quot;&lt;/defs&gt;\n&quot;
        + &quot;&lt;g transform=\&quot;translate(0 0.5)\&quot;&gt;\n&quot;
        + &quot;&lt;rect id=\&quot;Track\&quot; width=\&quot;80\&quot; height=\&quot;1\&quot; rx=\&quot;0.5\&quot; transform=\&quot;translate(0 14)\&quot;&quot;
        + &quot; fill=\&quot;&quot; + trackColorInactive + &quot;\&quot;/&gt;\n&quot;
        + &quot;&lt;rect id=\&quot;Fill\&quot; width=\&quot;40\&quot; height=\&quot;1\&quot; rx=\&quot;0.5\&quot; transform=\&quot;translate(0 14)\&quot;&quot;
        + &quot; fill=\&quot;&quot; + trackColorActive + &quot;\&quot;/&gt;\n&quot;
        + &quot;&lt;g transform=\&quot;matrix(1, 0, 0, 1, 0, -0.5)\&quot; filter=\&quot;url(#Knob)\&quot;&gt;\n&quot;
        + &quot;&lt;g transform=\&quot;translate(26.07 0.5)\&quot; fill=\&quot;#fff\&quot; stroke=\&quot;rgba(0,0,0,0.03)\&quot;&quot;
        + &quot; stroke-miterlimit=\&quot;10\&quot; stroke-width=\&quot;0.5\&quot;&gt;\n&quot;
        + &quot;&lt;circle cx=\&quot;14\&quot; cy=\&quot;14\&quot; r=\&quot;14\&quot; stroke=\&quot;none\&quot;/&gt;\n&quot;
        + &quot;&lt;circle cx=\&quot;14\&quot; cy=\&quot;14\&quot; r=\&quot;14.25\&quot; fill=\&quot;none\&quot;/&gt;\n&quot;
        + &quot;&lt;/g&gt;\n&quot;
        + &quot;&lt;/g&gt;\n&quot;
        + &quot;&lt;/g&gt;&quot;);
<span class="nc" id="L169">  }</span>

  /**
   * Set track color for slider on the left side of the thumb
   * Thumb is the button that slides back and forth on the slider
   *
   */
  private void setTrackColorActiveProperty(String text) {
<span class="nc bnc" id="L177" title="All 2 branches missed.">    if (sliderGraphic != null) {</span>
<span class="nc" id="L178">      trackColorActive = MockComponentsUtil.getColor(text).toString();</span>
<span class="nc" id="L179">      paintSlider();</span>
    }
<span class="nc" id="L181">  }</span>

  /**
   * Set track color for slider on the right side of the thumb
   * Thumb is the button that slides back and forth on the slider
   *
   */
  private void setTrackColorInactiveProperty(String text) {
<span class="nc bnc" id="L189" title="All 2 branches missed.">    if (sliderGraphic != null) {</span>
<span class="nc" id="L190">      trackColorInactive = MockComponentsUtil.getColor(text).toString();</span>
<span class="nc" id="L191">      paintSlider();</span>
    }
<span class="nc" id="L193">  }</span>

  @Override
  protected boolean isPropertyVisible(String propertyName) {
    //We don't want to allow user to change the slider height. S/he can only change the
    //slider width
<span class="nc bnc" id="L199" title="All 2 branches missed.">    if (propertyName.equals(PROPERTY_NAME_HEIGHT)) {</span>
<span class="nc" id="L200">      return false;</span>
    }
<span class="nc" id="L202">    return super.isPropertyVisible(propertyName);</span>
  }

  // PropertyChangeListener implementation
  @Override
  public void onPropertyChange(String propertyName, String newValue) {
<span class="nc" id="L208">    super.onPropertyChange(propertyName, newValue);</span>

    // Apply changed properties to the mock component
<span class="nc bnc" id="L211" title="All 2 branches missed.">    if (propertyName.equals(PROPERTY_NAME_WIDTH)) {</span>
<span class="nc" id="L212">      refreshForm();</span>
<span class="nc bnc" id="L213" title="All 2 branches missed.">    } else if (propertyName.equals(PROPERTY_NAME_COLORLEFT)) {</span>
<span class="nc" id="L214">      setTrackColorActiveProperty(newValue);</span>
<span class="nc" id="L215">      refreshForm();</span>
<span class="nc bnc" id="L216" title="All 2 branches missed.">    } else if (propertyName.equals(PROPERTY_NAME_COLORRIGHT)) {</span>
<span class="nc" id="L217">      setTrackColorInactiveProperty(newValue);</span>
<span class="nc" id="L218">      refreshForm();</span>
    }

<span class="nc" id="L221">  }</span>

  /*
   * We add the DesignPreviewChangeListener here instead of in the
   * constructor because at construction time we do not have a
   * container so getForm() fails.
   */

  @Override
  protected void setContainer(MockContainer container) {
<span class="nc" id="L231">    super.setContainer(container);</span>
<span class="nc" id="L232">    getForm().addDesignPreviewChangeListener(this);</span>
<span class="nc" id="L233">  }</span>

  @Override
  public void onDesignPreviewChanged() {
<span class="nc" id="L237">    super.onDesignPreviewChanged();</span>
<span class="nc" id="L238">    paintSlider();</span>
<span class="nc" id="L239">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>