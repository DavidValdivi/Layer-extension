<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MockNonVisibleComponent.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.google.appinventor.client.editor.simple.components</a> &gt; <span class="el_source">MockNonVisibleComponent.java</span></div><h1>MockNonVisibleComponent.java</h1><pre class="source lang-java linenums">// -*- mode: java; c-basic-offset: 2; -*-
// Copyright 2009-2011 Google, All Rights reserved
// Copyright 2011-2012 MIT, All rights reserved
// Released under the Apache License, Version 2.0
// http://www.apache.org/licenses/LICENSE-2.0

package com.google.appinventor.client.editor.simple.components;

import com.google.appinventor.client.editor.simple.SimpleEditor;
import com.google.appinventor.client.widgets.Icon;
import com.google.gwt.user.client.ui.Image;
import com.google.gwt.user.client.ui.Widget;

/**
 * Class for components without a visual representation, such as sensors.
 *
 * &lt;p&gt;To add a new non-visual component:
 * &lt;ol&gt;
 *   &lt;li&gt; Put the image for the component's icon in {@code
 *        appengine/src/com/google/appinventor/images/FILENAME}
 *        (substituting the actual filename).
 *   &lt;li&gt; In the class implementing the component (in the directory
 *        {@code components/src/com/google/appinventor/components/runtime/}),
 *        make sure the
 *        {@link com.google.appinventor.components.annotations.DesignerComponent} annotation
 *        includes the following key-value pairs:
 *        &lt;ul&gt;
 *            &lt;li&gt; nonVisible = true
 *            &lt;li&gt; iconName = &quot;images/FILENAME&quot;
 *       &lt;/ul&gt;
 *   &lt;li&gt; For good performance in fetching image files:
 *        &lt;ul&gt;
 *            &lt;li&gt; Add a {@link com.google.gwt.resources.client.ClientBundle.Source}
 *                 annotation and corresponding method to
 *                 {@code appengine/src/com/google/appinventor/client/Images.java}.
 *            &lt;li&gt; Add a mapping from the name of the icon to this new method to the method
 *                 {@code initBundledImages()} in {@code
 *                 appengine/src/com/google/appinventor/client/editor/simple/palette/SimpleComponentDescriptor.java}.
 *       &lt;/ul&gt;
 *   &lt;/ol&gt;
 *
 * @author sharon@google.com (Sharon Perl)
 */
public class MockNonVisibleComponent extends MockComponent {

  private final Icon iconWidget;

  /**
   * Creates a new instance of a non-visible component whose icon is
   * loaded dynamically (not part of the icon image bundle)
   */
  public MockNonVisibleComponent(SimpleEditor editor, String type, Image iconImage) {
<span class="nc" id="L53">    super(editor, type, iconImage);</span>
<span class="nc" id="L54">    iconWidget = new Icon(iconImage);</span>

<span class="nc" id="L56">    initComponent(iconWidget);</span>
<span class="nc" id="L57">  }</span>

  @Override
  public void initComponent(Widget widget) {
<span class="nc" id="L61">    super.initComponent(widget);</span>
<span class="nc" id="L62">  }</span>

  /**
   * {@inheritDoc}
   *
   * This is always {@code false} for subclasses of this class.
   */
  @Override
  public final boolean isVisibleComponent() {
<span class="nc" id="L71">    return false;</span>
  }

  @Override
  public final int getPreferredHeight() {
<span class="nc" id="L76">    return 0;</span>
  }

  @Override
  public final int getPreferredWidth() {
<span class="nc" id="L81">    return 0;</span>
  }

  @Override
  protected final void onSelectedChange(boolean selected) {
<span class="nc" id="L86">    super.onSelectedChange(selected);</span>
<span class="nc bnc" id="L87" title="All 2 branches missed.">    if (selected) {</span>
<span class="nc" id="L88">      iconWidget.select();</span>
    } else {
<span class="nc" id="L90">      iconWidget.deselect();</span>
    }
<span class="nc" id="L92">  }</span>

  // PropertyChangeListener implementation

  @Override
  public void onPropertyChange(String propertyName, String newValue) {
<span class="nc" id="L98">    super.onPropertyChange(propertyName, newValue);</span>

    // No visual changes after property changes (other than icon name).
<span class="nc bnc" id="L101" title="All 2 branches missed.">    if (propertyName.equals(PROPERTY_NAME_NAME)) {</span>
<span class="nc" id="L102">      iconWidget.setCaption(newValue);</span>
    }
<span class="nc" id="L104">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>